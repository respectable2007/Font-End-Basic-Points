<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
	<title>事件机制</title>
  </head>
  <body>
    <div id='d'>dsdsdsds</div>
	<div id='c'>
	  Parent
	  <div id='b'>Child</div>
	</div>
	<script type='text/javascript'>
	  var node = document.getElementsByTagName('*');
	  var d = document.getElementById('d');
	  d.addEventListener('click',function(){
	    alert();
	  },false);
	  d.addEventListener('click',function(){
	    alert('我是第二次');
	  },false);
	  d.onclick = function(){
	    alert('不规范绑定');
	  }
	  d.addEventListener('click',function(){
	    alert();
	  },false);
	  d.addEventListener('mousedown', function(){
	    console.log('mousedown');
	  }, false)
	  var events = typeof getEventListeners == 'function' && getEventListeners(d)
	  
	  var c = document.getElementById('c'),
	      b = document.getElementById('b')
		  body = document.body;
	  c.addEventListener('click', function(){
	    console.log('c')
	  })
	  b.addEventListener('click', function(e){
	    console.log(e)
	  })
	  body.addEventListener('click', function(){
	    console.log('body');
	  })
	  var event = {
	    addEvent:function(element,type,fn,useCapture){
		  useCapture = typeof useCapture === 'undefined' ? false : true
		  if(element.addEventListener){
		    element.addEventListener(type,fn,useCapture)
		  } else if(element.attachEvent){
		    element.attachEvent('on'+type,fn)
		  } else {
		    element['on'+type] = fn
		  }
		},
		removeEvent:function(element,type,fn,useCapture){
		  useCapture = typeof useCapture === 'undefined' ? false : true
		  if(element.removeEventListener){
		    element.removeEventListener(type, fn,useCapture)
		  }else if(element.detachEvent){
		    element.detachEvent('on'+type, fn)
		  }else {
		    element['on'+type] = null
		  }
		},
		getEvent:function(e){
		  return e ? e : window.event
		},
		getTarget:function(e){
		  return e.target || e.srcElement
		},
		preventDefault:function(e){
		  if(e.preventDefault){
		    e.preventDefault()
		  } else {
		    e.returnValue = false
		  }
		},
		stopPropagation:function(e){
		  if(e.stopPropagation){
		    e.stopPropagation()
		  } else {
		    e.cancelBubble = true
		  }
		}
	  }
	  event.addEvent(c,'click',function(){
	    console.log('cc')
	  }, true)
	</script>
  </body>
</html>